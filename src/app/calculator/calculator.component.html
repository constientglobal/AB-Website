<div class="container my-5">
  <!-- Investment Type Selection -->
  <div class="mb-4">
    <h2 class="text-dark-blue mb-2 text-start">Investment Calculator</h2>
    <p class="text-muted text-start">Choose your investment type to calculate future returns</p>

    <div class="d-flex flex-wrap gap-2">
      <button class="btn btn-outline-primary" [ngClass]="{ 'active': activeTab === 'sip' }"
        (click)="activateTab('sip')">
        SIP Calculator
      </button>
      <button class="btn btn-outline-primary" [ngClass]="{ 'active': activeTab === 'lumpsum' }"
        (click)="activateTab('lumpsum')">
        Lumpsum Calculator
      </button>
    </div>
  </div>

  <!-- SIP Calculator -->
  <div *ngIf="activeTab === 'sip'">
    <div class="row gy-4">
      <div class="col-12 col-lg-6">
        <h3 class="text-dark-blue fw-bold mb-3 text-start">SIP Calculator</h3>
        <p class="text-muted mb-3 text-start">Planning systematic investments? Calculate the future value of your
          regular SIP investments.</p>
        <form>
          <div class="mb-3">
            <label for="sipAmount" class="form-label">Monthly Investment (₹)</label>
            <input type="number" class="form-control" id="sipAmount" [(ngModel)]="sipAmount" name="sipAmount"
              (input)="calculateSIP()" placeholder="Enter amount">
          </div>

          <div class="mb-3">
            <label for="sipRate" class="form-label">Expected Annual Return Rate (%)</label>
            <input type="number" class="form-control" id="sipRate" [(ngModel)]="sipRate" name="sipRate"
              (input)="calculateSIP()" placeholder="Enter rate">
          </div>

          <div class="mb-3">
            <label for="sipYears" class="form-label">Duration (Years)</label>
            <input type="number" class="form-control" id="sipYears" [(ngModel)]="sipYears" name="sipYears"
              (input)="calculateSIP()" placeholder="Enter years">
          </div>

          <div class="mt-3 p-3 border rounded bg-light">
            <p><strong>Invested Amount:</strong> ₹{{ sipInvested | number:'1.0-0' }}</p>
            <p><strong>Estimated Returns:</strong> ₹{{ sipReturns | number:'1.0-0' }}</p>
            <p><strong>Maturity Value:</strong> ₹{{ sipTotal | number:'1.0-0' }}</p>
          </div>

          <button type="button" class="btn btn-primary mt-3 w-100">INVEST NOW</button>
        </form>
      </div>

      <div class="col-12 col-lg-6 d-flex justify-content-center">
        <p-chart type="doughnut" [data]="data" [options]="options" class="w-75" />
      </div>
    </div>
  </div>

  <!-- Lumpsum Calculator -->
  <div *ngIf="activeTab === 'lumpsum'">
    <div class="row gy-4">
      <div class="col-12 col-lg-7">
        <h3 class="text-primary mb-3 text-start">Lumpsum Calculator</h3>
        <p class="text-muted mb-3 text-start">
          Thinking of making a Lumpsum investment? Calculate the future value of your wealth using our Lumpsum
          Calculator.
        </p>

        <form>
          <div class="row">
            <div class="col-12 col-md-6 mb-3">
              <label for="lumpsumAmount" class="form-label text-start d-block">Investment Amount *</label>
              <input type="number" class="form-control" id="lumpsumAmount" name="lumpsumAmount"
                [(ngModel)]="lumpsumAmount" (input)="calculateLumpsum()" placeholder="Enter amount" min="1000">
              <div *ngIf="isLumpsumAmountInvalid" class="text-danger mt-1">
                *Minimum Invest Amount is ₹1000
              </div>
            </div>
            <div class="col-12 col-md-6 mb-3">
              <label for="lumpsumRate" class="form-label text-start d-block">Expected Return (P.A.) *</label>
              <input type="number" class="form-control" id="lumpsumRate" name="lumpsumRate" [(ngModel)]="lumpsumRate"
                (input)="calculateLumpsum()" placeholder="Enter rate">
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mb-3">
              <label for="lumpsumYears" class="form-label text-start d-block">Tenure (Years) *</label>
              <input type="number" class="form-control" id="lumpsumYears" name="lumpsumYears" [(ngModel)]="lumpsumYears"
                (input)="calculateLumpsum()" placeholder="Enter years">
            </div>
          </div>

          <!-- ✅ Added Summary Block for Lumpsum -->
          <div class="mt-3 mb-3 p-3 border rounded bg-light">
            <p><strong>Invested Amount:</strong> ₹{{ lumpsumInvested | number:'1.0-0' }}</p>
            <p><strong>Estimated Returns:</strong> ₹{{ lumpsumReturns | number:'1.0-0' }}</p>
            <p><strong>Maturity Value:</strong> ₹{{ lumpsumTotal | number:'1.0-0' }}</p>
          </div>

          <div class="d-flex flex-wrap gap-2 mb-4">
            <button type="button" class="btn btn-primary" (click)="calculateLumpsum()">Plan My Future Value</button>
            <button type="button" class="btn btn-outline-secondary" (click)="resetLumpsum()">Reset</button>
          </div>
        </form>
      </div>

      <div class="col-12 col-lg-5">
        <div class="card w-100 p-3">
          <p-chart type="doughnut" [data]="data" [options]="options" class="w-100" />
        </div>
      </div>
    </div>
  </div>
</div>